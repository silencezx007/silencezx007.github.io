<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI å®æ—¶ç¿»è¯‘ - ä¸­è‘¡è‹±äº’è¯‘</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: { 50: '#eff6ff', 100: '#dbeafe', 500: '#3b82f6', 600: '#2563eb', 700: '#1d4ed8' },
                        dark: { 100: '#1e1e2e', 200: '#181825', 300: '#11111b', 400: '#0a0a0f' }
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
        }

        .glass {
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        @keyframes ripple {
            0% {
                transform: scale(1);
                opacity: 0.8;
            }

            100% {
                transform: scale(2.5);
                opacity: 0;
            }
        }

        .recording-ripple {
            animation: ripple 1.5s linear infinite;
        }

        @keyframes typewriter {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .typewriter span {
            animation: typewriter 0.05s ease-in-out forwards;
            opacity: 0;
        }

        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }

        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>

<body
    class="bg-gradient-to-br from-slate-50 to-blue-50 dark:from-dark-400 dark:to-dark-300 min-h-screen transition-colors duration-300">
    <div id="app" class="min-h-screen flex flex-col">
        <!-- Header -->
        <header
            class="sticky top-0 z-50 glass bg-white/80 dark:bg-dark-200/80 border-b border-slate-200/50 dark:border-slate-700/50">
            <div class="max-w-4xl mx-auto px-4 py-3 flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div
                        class="w-10 h-10 rounded-xl bg-gradient-to-br from-primary-500 to-purple-600 flex items-center justify-center">
                        <i class="fas fa-language text-white text-lg"></i>
                    </div>
                    <div>
                        <h1 class="text-lg font-semibold text-slate-800 dark:text-white">AI å®æ—¶ç¿»è¯‘</h1>
                        <p class="text-xs text-slate-500 dark:text-slate-400">å®‰å“¥æ‹‰æœºåœºè¿ç»´</p>
                    </div>
                </div>
                <div class="flex items-center gap-2">
                    <button onclick="toggleTheme()"
                        class="w-10 h-10 rounded-xl bg-slate-100 dark:bg-dark-100 hover:bg-slate-200 dark:hover:bg-slate-700 flex items-center justify-center transition-all"
                        title="åˆ‡æ¢ä¸»é¢˜">
                        <i class="fas fa-sun text-amber-500 dark:hidden"></i>
                        <i class="fas fa-moon text-blue-400 hidden dark:block"></i>
                    </button>
                    <button onclick="showSettings()"
                        class="w-10 h-10 rounded-xl bg-slate-100 dark:bg-dark-100 hover:bg-slate-200 dark:hover:bg-slate-700 flex items-center justify-center transition-all"
                        title="è®¾ç½®">
                        <i class="fas fa-cog text-slate-600 dark:text-slate-300"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="flex-1 max-w-4xl mx-auto w-full px-4 py-6">
            <!-- API Key Warning -->
            <div id="apiWarning"
                class="hidden mb-4 p-4 rounded-2xl bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-700">
                <div class="flex items-center gap-3">
                    <i class="fas fa-exclamation-triangle text-amber-500"></i>
                    <p class="text-sm text-amber-700 dark:text-amber-300">è¯·å…ˆé…ç½® API Key ä»¥ä½¿ç”¨ç¿»è¯‘åŠŸèƒ½</p>
                    <button onclick="showSettings()"
                        class="ml-auto px-3 py-1 text-xs bg-amber-500 hover:bg-amber-600 text-white rounded-lg transition-colors">å»è®¾ç½®</button>
                </div>
            </div>

            <!-- Language Selector -->
            <div
                class="glass bg-white/60 dark:bg-dark-100/60 rounded-2xl p-4 mb-4 border border-slate-200/50 dark:border-slate-700/50">
                <div class="flex items-center gap-3">
                    <div class="flex-1">
                        <label class="block text-xs text-slate-500 dark:text-slate-400 mb-1.5 font-medium">æºè¯­è¨€</label>
                        <select id="sourceLang" onchange="onLanguageChange()"
                            class="w-full px-4 py-2.5 rounded-xl bg-slate-100 dark:bg-dark-200 border-0 text-slate-700 dark:text-slate-200 font-medium focus:ring-2 focus:ring-primary-500 transition-all cursor-pointer">
                            <option value="auto">ğŸŒ è‡ªåŠ¨æ£€æµ‹</option>
                            <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
                            <option value="en">ğŸ‡¬ğŸ‡§ è‹±è¯­</option>
                            <option value="pt">ğŸ‡µğŸ‡¹ è‘¡è„ç‰™è¯­</option>
                            <option value="ja">ğŸ‡¯ğŸ‡µ æ—¥è¯­</option>
                            <option value="ko">ğŸ‡°ğŸ‡· éŸ©è¯­</option>
                            <option value="fr">ğŸ‡«ğŸ‡· æ³•è¯­</option>
                            <option value="de">ğŸ‡©ğŸ‡ª å¾·è¯­</option>
                            <option value="es">ğŸ‡ªğŸ‡¸ è¥¿ç­ç‰™è¯­</option>
                            <option value="ru">ğŸ‡·ğŸ‡º ä¿„è¯­</option>
                        </select>
                    </div>
                    <button onclick="swapLanguages()"
                        class="w-12 h-12 mt-5 rounded-xl bg-primary-500 hover:bg-primary-600 text-white flex items-center justify-center transition-all hover:scale-105 active:scale-95 shadow-lg shadow-primary-500/30">
                        <i class="fas fa-exchange-alt"></i>
                    </button>
                    <div class="flex-1">
                        <label class="block text-xs text-slate-500 dark:text-slate-400 mb-1.5 font-medium">ç›®æ ‡è¯­è¨€</label>
                        <select id="targetLang" onchange="onLanguageChange()"
                            class="w-full px-4 py-2.5 rounded-xl bg-slate-100 dark:bg-dark-200 border-0 text-slate-700 dark:text-slate-200 font-medium focus:ring-2 focus:ring-primary-500 transition-all cursor-pointer">
                            <option value="en">ğŸ‡¬ğŸ‡§ è‹±è¯­</option>
                            <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
                            <option value="pt" selected>ğŸ‡µğŸ‡¹ è‘¡è„ç‰™è¯­</option>
                            <option value="ja">ğŸ‡¯ğŸ‡µ æ—¥è¯­</option>
                            <option value="ko">ğŸ‡°ğŸ‡· éŸ©è¯­</option>
                            <option value="fr">ğŸ‡«ğŸ‡· æ³•è¯­</option>
                            <option value="de">ğŸ‡©ğŸ‡ª å¾·è¯­</option>
                            <option value="es">ğŸ‡ªğŸ‡¸ è¥¿ç­ç‰™è¯­</option>
                            <option value="ru">ğŸ‡·ğŸ‡º ä¿„è¯­</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Input Area -->
            <div
                class="glass bg-white/60 dark:bg-dark-100/60 rounded-2xl p-4 mb-4 border border-slate-200/50 dark:border-slate-700/50">
                <div class="flex items-center justify-between mb-3">
                    <span
                        class="text-xs text-slate-500 dark:text-slate-400 font-medium uppercase tracking-wide">è¾“å…¥</span>
                    <div class="flex items-center gap-2">
                        <button onclick="clearInput()"
                            class="p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-dark-200 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors"
                            title="æ¸…ç©º">
                            <i class="fas fa-times"></i>
                        </button>
                        <button onclick="pasteFromClipboard()"
                            class="p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-dark-200 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors"
                            title="ç²˜è´´">
                            <i class="fas fa-paste"></i>
                        </button>
                    </div>
                </div>
                <textarea id="inputText" rows="4" placeholder="è¾“å…¥æˆ–ç²˜è´´è¦ç¿»è¯‘çš„æ–‡æœ¬..." oninput="onInputChange()"
                    class="w-full bg-transparent text-slate-700 dark:text-slate-200 placeholder-slate-400 resize-none focus:outline-none text-lg leading-relaxed scrollbar-hide"></textarea>
                <div
                    class="flex items-center justify-between mt-3 pt-3 border-t border-slate-200/50 dark:border-slate-700/50">
                    <span id="charCount" class="text-xs text-slate-400">0 å­—ç¬¦</span>
                    <button onclick="translateText()"
                        class="px-5 py-2 bg-primary-500 hover:bg-primary-600 text-white text-sm font-medium rounded-xl transition-all hover:shadow-lg hover:shadow-primary-500/30 active:scale-95">
                        <i class="fas fa-language mr-2"></i>ç¿»è¯‘
                    </button>
                </div>
            </div>

            <!-- Voice Recording -->
            <div class="flex justify-center mb-6">
                <div class="relative">
                    <div id="ripple1" class="absolute inset-0 rounded-full bg-primary-500/30 hidden recording-ripple">
                    </div>
                    <div id="ripple2" class="absolute inset-0 rounded-full bg-primary-500/20 hidden recording-ripple"
                        style="animation-delay: 0.5s"></div>
                    <button id="micBtn" onclick="toggleRecording()"
                        class="relative w-20 h-20 rounded-full bg-gradient-to-br from-primary-500 to-purple-600 hover:from-primary-600 hover:to-purple-700 text-white flex items-center justify-center transition-all hover:scale-105 active:scale-95 shadow-2xl shadow-primary-500/40">
                        <i id="micIcon" class="fas fa-microphone text-2xl"></i>
                    </button>
                </div>
            </div>
            <p id="recordHint" class="text-center text-sm text-slate-500 dark:text-slate-400 mb-4">ç‚¹å‡»éº¦å…‹é£å¼€å§‹è¯­éŸ³è¾“å…¥</p>

            <!-- Auto Stop Options -->
            <div class="flex items-center justify-center gap-4 mb-6">
                <span class="text-xs text-slate-500 dark:text-slate-400">é™éŸ³åè‡ªåŠ¨åœæ­¢ï¼š</span>
                <div class="flex gap-2">
                    <label class="flex items-center gap-1 cursor-pointer">
                        <input type="radio" name="autoStop" value="0" class="w-3 h-3 text-primary-500"
                            onchange="onAutoStopChange()">
                        <span class="text-xs text-slate-600 dark:text-slate-300">å…³é—­</span>
                    </label>
                    <label class="flex items-center gap-1 cursor-pointer">
                        <input type="radio" name="autoStop" value="3" class="w-3 h-3 text-primary-500" checked
                            onchange="onAutoStopChange()">
                        <span class="text-xs text-slate-600 dark:text-slate-300">3ç§’</span>
                    </label>
                    <label class="flex items-center gap-1 cursor-pointer">
                        <input type="radio" name="autoStop" value="5" class="w-3 h-3 text-primary-500"
                            onchange="onAutoStopChange()">
                        <span class="text-xs text-slate-600 dark:text-slate-300">5ç§’</span>
                    </label>
                </div>
            </div>

            <!-- Result Area -->
            <div id="resultArea"
                class="glass bg-white/60 dark:bg-dark-100/60 rounded-2xl p-4 border border-slate-200/50 dark:border-slate-700/50 min-h-[200px]">
                <div class="flex items-center justify-between mb-4">
                    <span
                        class="text-xs text-slate-500 dark:text-slate-400 font-medium uppercase tracking-wide">ç¿»è¯‘ç»“æœ</span>
                    <div class="flex items-center gap-2">
                        <label
                            class="flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400 cursor-pointer">
                            <input type="checkbox" id="autoSpeak" onchange="saveSettings()"
                                class="w-4 h-4 rounded border-slate-300 text-primary-500 focus:ring-primary-500">
                            <span>è‡ªåŠ¨æœ—è¯»</span>
                        </label>
                    </div>
                </div>

                <!-- Result Container (order will be dynamic based on target language) -->
                <div id="resultsContainer">
                    <!-- Translated Text (Primary - shown first) -->
                    <div id="translatedSection" class="mb-4">
                        <div class="flex items-center gap-2 mb-2">
                            <span id="targetLangBadge"
                                class="px-2 py-0.5 text-xs rounded-md bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400">è¯‘æ–‡</span>
                            <button onclick="speakText('translated')" id="speakBtn"
                                class="p-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-dark-200 text-slate-400 hover:text-primary-500 transition-colors"
                                title="æœ—è¯»">
                                <i class="fas fa-volume-up text-sm"></i>
                            </button>
                            <button onclick="copyText('translated')"
                                class="p-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-dark-200 text-slate-400 hover:text-primary-500 transition-colors"
                                title="å¤åˆ¶">
                                <i class="fas fa-copy text-sm"></i>
                            </button>
                        </div>
                        <p id="translatedText"
                            class="text-slate-700 dark:text-slate-200 text-2xl font-semibold leading-relaxed">
                            ç¿»è¯‘ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...</p>
                    </div>

                    <!-- Original Text (Secondary - shown after) -->
                    <div id="originalSection" class="hidden pt-4 border-t border-slate-200/50 dark:border-slate-700/50">
                        <div class="flex items-center gap-2 mb-2">
                            <span id="detectedLangBadge"
                                class="px-2 py-0.5 text-xs rounded-md bg-slate-200 dark:bg-dark-200 text-slate-600 dark:text-slate-400">åŸæ–‡</span>
                            <button onclick="speakText('original')"
                                class="p-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-dark-200 text-slate-400 hover:text-primary-500 transition-colors"
                                title="æœ—è¯»">
                                <i class="fas fa-volume-up text-sm"></i>
                            </button>
                            <button onclick="copyText('original')"
                                class="p-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-dark-200 text-slate-400 hover:text-primary-500 transition-colors"
                                title="å¤åˆ¶">
                                <i class="fas fa-copy text-sm"></i>
                            </button>
                        </div>
                        <p id="originalText" class="text-slate-500 dark:text-slate-400 text-base leading-relaxed"></p>
                    </div>
                </div>
            </div>

            <!-- History -->
            <div class="mt-6">
                <div class="flex items-center justify-between mb-3">
                    <h3 class="text-sm font-medium text-slate-600 dark:text-slate-300"><i
                            class="fas fa-history mr-2"></i>å†å²è®°å½•</h3>
                    <button onclick="clearHistory()"
                        class="text-xs text-slate-400 hover:text-red-500 transition-colors">æ¸…ç©º</button>
                </div>
                <div id="historyList" class="space-y-2 max-h-64 overflow-y-auto scrollbar-hide">
                    <p class="text-center text-sm text-slate-400 py-8">æš‚æ— å†å²è®°å½•</p>
                </div>
            </div>
        </main>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/50 backdrop-blur-sm" onclick="hideSettings()"></div>
        <div
            class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-full md:max-w-md bg-white dark:bg-dark-100 rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]">
            <div class="p-4 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between">
                <h2 class="text-lg font-semibold text-slate-800 dark:text-white"><i
                        class="fas fa-cog mr-2 text-primary-500"></i>è®¾ç½®</h2>
                <button onclick="hideSettings()"
                    class="w-8 h-8 rounded-lg hover:bg-slate-100 dark:hover:bg-dark-200 flex items-center justify-center transition-colors">
                    <i class="fas fa-times text-slate-400"></i>
                </button>
            </div>
            <div class="p-4 overflow-y-auto flex-1">
                <!-- Provider Select -->
                <div class="mb-4">
                    <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">ç¿»è¯‘æœåŠ¡æä¾›å•†</label>
                    <select id="providerSelect" onchange="onProviderChange()"
                        class="w-full px-4 py-3 rounded-xl bg-slate-100 dark:bg-dark-200 border-0 text-slate-700 dark:text-slate-200 focus:ring-2 focus:ring-primary-500">
                        <option value="gemini">ğŸŒŸ Google Gemini (å…è´¹é¢åº¦)</option>
                        <option value="groq">âš¡ Groq (å®Œå…¨å…è´¹ï¼Œæ¨è)</option>
                        <option value="siliconflow">ğŸ‡¨ğŸ‡³ ç¡…åŸºæµåŠ¨ (å›½å†…å…è´¹)</option>
                        <option value="deepseek">ğŸ’° DeepSeek (è¶…ä½æˆæœ¬)</option>
                        <option value="openai">ğŸ¤– OpenAI GPT-4o-mini</option>
                        <option value="openrouter">ğŸŒ OpenRouter (å¤šæ¨¡å‹)</option>
                    </select>
                    <p id="providerInfo" class="mt-2 text-xs text-slate-500 dark:text-slate-400"></p>
                </div>

                <!-- API Key -->
                <div class="mb-4">
                    <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">API Key</label>
                    <div class="relative">
                        <input type="password" id="apiKeyInput" placeholder="è¾“å…¥ä½ çš„ API Key"
                            class="w-full px-4 py-3 pr-12 rounded-xl bg-slate-100 dark:bg-dark-200 border-0 text-slate-700 dark:text-slate-200 focus:ring-2 focus:ring-primary-500">
                        <button onclick="toggleApiKeyVisibility()"
                            class="absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300">
                            <i id="eyeIcon" class="fas fa-eye"></i>
                        </button>
                    </div>
                </div>

                <!-- Voice Options -->
                <div class="mb-4">
                    <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">ğŸ”Š æœ—è¯»è¯­éŸ³é£æ ¼</label>
                    <select id="voiceSelect"
                        class="w-full px-4 py-3 rounded-xl bg-slate-100 dark:bg-dark-200 border-0 text-slate-700 dark:text-slate-200 focus:ring-2 focus:ring-primary-500">
                        <option value="default">ç³»ç»Ÿé»˜è®¤</option>
                        <option value="natural">è‡ªç„¶äººå£° (æ¨è)</option>
                        <option value="female">å¥³å£°</option>
                        <option value="male">ç”·å£°</option>
                    </select>
                    <p class="mt-2 text-xs text-slate-500 dark:text-slate-400">é€‰æ‹©æœ—è¯»å£°éŸ³ç±»å‹ï¼Œå®é™…å¯ç”¨å£°éŸ³å–å†³äºæµè§ˆå™¨</p>
                </div>

                <!-- Speech Rate -->
                <div class="mb-4">
                    <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">è¯­é€Ÿè°ƒèŠ‚</label>
                    <div class="flex items-center gap-3">
                        <span class="text-xs text-slate-400">æ…¢</span>
                        <input type="range" id="speechRate" min="0.5" max="1.5" step="0.1" value="0.9"
                            class="flex-1 h-2 bg-slate-200 dark:bg-dark-300 rounded-lg appearance-none cursor-pointer">
                        <span class="text-xs text-slate-400">å¿«</span>
                        <span id="rateValue" class="text-xs text-primary-500 font-medium w-8">0.9x</span>
                    </div>
                </div>

                <!-- Provider Links -->
                <div class="p-3 rounded-xl bg-slate-50 dark:bg-dark-200 mb-4">
                    <p class="text-xs text-slate-500 dark:text-slate-400 mb-2">è·å–å…è´¹ API Keyï¼š</p>
                    <div class="flex flex-wrap gap-2">
                        <a href="https://console.groq.com/keys" target="_blank"
                            class="text-xs px-2 py-1 rounded-lg bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 hover:bg-primary-200 transition-colors">Groq
                            âš¡</a>
                        <a href="https://aistudio.google.com/apikey" target="_blank"
                            class="text-xs px-2 py-1 rounded-lg bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400 hover:bg-amber-200 transition-colors">Gemini
                            ğŸŒŸ</a>
                        <a href="https://cloud.siliconflow.cn/account/ak" target="_blank"
                            class="text-xs px-2 py-1 rounded-lg bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 hover:bg-green-200 transition-colors">ç¡…åŸºæµåŠ¨
                            ğŸ‡¨ğŸ‡³</a>
                        <a href="https://platform.deepseek.com/api_keys" target="_blank"
                            class="text-xs px-2 py-1 rounded-lg bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 hover:bg-purple-200 transition-colors">DeepSeek
                            ğŸ’°</a>
                    </div>
                </div>
            </div>
            <div class="p-4 border-t border-slate-200 dark:border-slate-700">
                <button onclick="saveAndClose()"
                    class="w-full py-3 bg-gradient-to-r from-primary-500 to-purple-600 hover:from-primary-600 hover:to-purple-700 text-white font-medium rounded-xl transition-all hover:shadow-lg active:scale-[0.98]">
                    <i class="fas fa-check mr-2"></i>ä¿å­˜è®¾ç½®
                </button>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast"
        class="fixed bottom-6 left-1/2 -translate-x-1/2 px-4 py-3 rounded-xl bg-slate-800 dark:bg-slate-700 text-white text-sm shadow-xl transform translate-y-20 opacity-0 transition-all duration-300 flex items-center gap-2 z-50">
        <i id="toastIcon" class="fas fa-check-circle text-green-400"></i>
        <span id="toastMsg">æ“ä½œæˆåŠŸ</span>
    </div>

    <script>
        // ========== Config ==========
        const PROVIDERS = {
            gemini: {
                name: 'Google Gemini',
                info: 'å…è´¹é¢åº¦ï¼šæ¯åˆ†é’Ÿ 15 æ¬¡è¯·æ±‚ï¼Œæ¯å¤© 1500 æ¬¡',
                endpoint: 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent',
                request: (prompt, key) => ({
                    url: `${PROVIDERS.gemini.endpoint}?key=${key}`,
                    body: { contents: [{ parts: [{ text: prompt }] }], generationConfig: { temperature: 0.1 } }
                }),
                parse: data => data.candidates?.[0]?.content?.parts?.[0]?.text || ''
            },
            groq: {
                name: 'Groq',
                info: 'å®Œå…¨å…è´¹ï¼Œé€Ÿåº¦æå¿«ï¼Œå¼ºçƒˆæ¨èï¼',
                endpoint: 'https://api.groq.com/openai/v1/chat/completions',
                request: (prompt, key) => ({
                    url: PROVIDERS.groq.endpoint,
                    headers: { 'Authorization': `Bearer ${key}` },
                    body: { model: 'llama-3.3-70b-versatile', messages: [{ role: 'user', content: prompt }], temperature: 0.1 }
                }),
                parse: data => data.choices?.[0]?.message?.content || ''
            },
            siliconflow: {
                name: 'ç¡…åŸºæµåŠ¨',
                info: 'å›½å†…æœåŠ¡ï¼Œæ³¨å†Œå³é€ 2000 ä¸‡ tokens',
                endpoint: 'https://api.siliconflow.cn/v1/chat/completions',
                request: (prompt, key) => ({
                    url: PROVIDERS.siliconflow.endpoint,
                    headers: { 'Authorization': `Bearer ${key}` },
                    body: { model: 'Qwen/Qwen2.5-7B-Instruct', messages: [{ role: 'user', content: prompt }], temperature: 0.1 }
                }),
                parse: data => data.choices?.[0]?.message?.content || ''
            },
            deepseek: {
                name: 'DeepSeek',
                info: 'è¶…ä½æˆæœ¬ï¼Œæ¯ç™¾ä¸‡ tokens çº¦ Â¥1',
                endpoint: 'https://api.deepseek.com/v1/chat/completions',
                request: (prompt, key) => ({
                    url: PROVIDERS.deepseek.endpoint,
                    headers: { 'Authorization': `Bearer ${key}` },
                    body: { model: 'deepseek-chat', messages: [{ role: 'user', content: prompt }], temperature: 0.1 }
                }),
                parse: data => data.choices?.[0]?.message?.content || ''
            },
            openai: {
                name: 'OpenAI',
                info: 'GPT-4o-miniï¼Œæ€§ä»·æ¯”é«˜',
                endpoint: 'https://api.openai.com/v1/chat/completions',
                request: (prompt, key) => ({
                    url: PROVIDERS.openai.endpoint,
                    headers: { 'Authorization': `Bearer ${key}` },
                    body: { model: 'gpt-4o-mini', messages: [{ role: 'user', content: prompt }], temperature: 0.1 }
                }),
                parse: data => data.choices?.[0]?.message?.content || ''
            },
            openrouter: {
                name: 'OpenRouter',
                info: 'ç»Ÿä¸€æ¥å£è®¿é—®å¤šç§æ¨¡å‹',
                endpoint: 'https://openrouter.ai/api/v1/chat/completions',
                request: (prompt, key) => ({
                    url: PROVIDERS.openrouter.endpoint,
                    headers: { 'Authorization': `Bearer ${key}` },
                    body: { model: 'meta-llama/llama-3.3-70b-instruct:free', messages: [{ role: 'user', content: prompt }], temperature: 0.1 }
                }),
                parse: data => data.choices?.[0]?.message?.content || ''
            }
        };

        const LANGUAGES = {
            auto: { name: 'è‡ªåŠ¨æ£€æµ‹', code: '', flag: 'ğŸŒ' },
            zh: { name: 'ä¸­æ–‡', code: 'zh-CN', flag: 'ğŸ‡¨ğŸ‡³' },
            en: { name: 'è‹±è¯­', code: 'en-US', flag: 'ğŸ‡¬ğŸ‡§' },
            pt: { name: 'è‘¡è„ç‰™è¯­', code: 'pt-PT', flag: 'ğŸ‡µğŸ‡¹' },
            ja: { name: 'æ—¥è¯­', code: 'ja-JP', flag: 'ğŸ‡¯ğŸ‡µ' },
            ko: { name: 'éŸ©è¯­', code: 'ko-KR', flag: 'ğŸ‡°ğŸ‡·' },
            fr: { name: 'æ³•è¯­', code: 'fr-FR', flag: 'ğŸ‡«ğŸ‡·' },
            de: { name: 'å¾·è¯­', code: 'de-DE', flag: 'ğŸ‡©ğŸ‡ª' },
            es: { name: 'è¥¿ç­ç‰™è¯­', code: 'es-ES', flag: 'ğŸ‡ªğŸ‡¸' },
            ru: { name: 'ä¿„è¯­', code: 'ru-RU', flag: 'ğŸ‡·ğŸ‡º' }
        };

        // ========== State ==========
        let state = {
            provider: localStorage.getItem('provider') || 'groq',
            apiKey: localStorage.getItem('apiKey') || '',
            autoSpeak: localStorage.getItem('autoSpeak') === 'true',
            theme: localStorage.getItem('theme') || 'light',
            sourceLang: localStorage.getItem('sourceLang') || 'auto',
            targetLang: localStorage.getItem('targetLang') || 'pt',
            history: JSON.parse(localStorage.getItem('history') || '[]'),
            isRecording: false,
            recognition: null,
            currentOriginal: '',
            currentTranslated: '',
            detectedLang: '',
            autoStopDelay: parseInt(localStorage.getItem('autoStopDelay') || '3'),
            silenceTimer: null,
            accumulatedText: '',
            voiceType: localStorage.getItem('voiceType') || 'natural',
            speechRate: parseFloat(localStorage.getItem('speechRate') || '0.9'),
            availableVoices: []
        };

        // ========== Init ==========
        document.addEventListener('DOMContentLoaded', () => {
            // Apply theme
            if (state.theme === 'dark' || (!state.theme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
                state.theme = 'dark';
            }

            // Load settings
            document.getElementById('sourceLang').value = state.sourceLang;
            document.getElementById('targetLang').value = state.targetLang;
            document.getElementById('autoSpeak').checked = state.autoSpeak;
            document.getElementById('providerSelect').value = state.provider;
            document.getElementById('apiKeyInput').value = state.apiKey;
            document.getElementById('voiceSelect').value = state.voiceType;
            document.getElementById('speechRate').value = state.speechRate;
            document.getElementById('rateValue').textContent = state.speechRate + 'x';

            // Speech rate slider event
            document.getElementById('speechRate').addEventListener('input', (e) => {
                document.getElementById('rateValue').textContent = e.target.value + 'x';
            });

            onProviderChange();
            renderHistory();

            // Check API key
            if (!state.apiKey) {
                document.getElementById('apiWarning').classList.remove('hidden');
            }

            // Init speech recognition
            const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
            if (SR) {
                state.recognition = new SR();
                state.recognition.continuous = true;
                state.recognition.interimResults = true;
                state.recognition.onresult = onSpeechResult;
                state.recognition.onerror = onSpeechError;
                state.recognition.onend = () => { if (state.isRecording) state.recognition.start(); };
            }

            // Init auto stop option
            const autoStopRadio = document.querySelector(`input[name="autoStop"][value="${state.autoStopDelay}"]`);
            if (autoStopRadio) autoStopRadio.checked = true;

            // Load available voices
            loadVoices();
            if (speechSynthesis.onvoiceschanged !== undefined) {
                speechSynthesis.onvoiceschanged = loadVoices;
            }
        });

        function loadVoices() {
            state.availableVoices = speechSynthesis.getVoices();
        }

        // ========== Theme ==========
        function toggleTheme() {
            state.theme = state.theme === 'dark' ? 'light' : 'dark';
            document.documentElement.classList.toggle('dark');
            localStorage.setItem('theme', state.theme);
        }

        // ========== Language ==========
        function onLanguageChange() {
            state.sourceLang = document.getElementById('sourceLang').value;
            state.targetLang = document.getElementById('targetLang').value;
            localStorage.setItem('sourceLang', state.sourceLang);
            localStorage.setItem('targetLang', state.targetLang);
            if (state.recognition) {
                state.recognition.lang = state.sourceLang === 'auto' ? 'zh-CN' : LANGUAGES[state.sourceLang].code;
            }
        }

        function swapLanguages() {
            const source = document.getElementById('sourceLang');
            const target = document.getElementById('targetLang');
            if (source.value === 'auto') {
                toast('è‡ªåŠ¨æ£€æµ‹æ¨¡å¼ä¸‹æ— æ³•äº¤æ¢', 'error');
                return;
            }
            [source.value, target.value] = [target.value, source.value];
            onLanguageChange();
            // Swap text if exists
            if (state.currentOriginal && state.currentTranslated) {
                document.getElementById('inputText').value = state.currentTranslated;
                onInputChange();
            }
        }

        // ========== Input ==========
        function onInputChange() {
            const input = document.getElementById('inputText');
            document.getElementById('charCount').textContent = `${input.value.length} å­—ç¬¦`;
        }

        function clearInput() {
            document.getElementById('inputText').value = '';
            onInputChange();
        }

        async function pasteFromClipboard() {
            try {
                const text = await navigator.clipboard.readText();
                document.getElementById('inputText').value = text;
                onInputChange();
                toast('å·²ç²˜è´´');
            } catch (e) {
                toast('æ— æ³•è®¿é—®å‰ªè´´æ¿', 'error');
            }
        }

        // ========== Recording ==========
        function onAutoStopChange() {
            const selected = document.querySelector('input[name="autoStop"]:checked');
            state.autoStopDelay = parseInt(selected.value);
            localStorage.setItem('autoStopDelay', state.autoStopDelay);
        }

        function toggleRecording() {
            if (!state.recognition) {
                toast('è¯­éŸ³è¯†åˆ«ä¸å¯ç”¨ï¼Œè¯·ä½¿ç”¨ Chrome æµè§ˆå™¨å¹¶é€šè¿‡ HTTP æœåŠ¡å™¨è®¿é—®', 'error');
                return;
            }
            state.isRecording ? stopRecording(true) : startRecording();
        }

        function startRecording() {
            if (!state.apiKey) {
                showSettings();
                toast('è¯·å…ˆé…ç½® API Key', 'error');
                return;
            }
            state.isRecording = true;
            state.accumulatedText = '';  // æ¸…ç©ºç´¯ç§¯æ–‡æœ¬

            const lang = state.sourceLang === 'auto' ? 'zh-CN' : LANGUAGES[state.sourceLang].code;
            state.recognition.lang = lang;
            state.recognition.start();

            document.getElementById('micBtn').classList.add('bg-red-500', 'from-red-500', 'to-red-600');
            document.getElementById('micIcon').classList.replace('fa-microphone', 'fa-stop');
            document.getElementById('ripple1').classList.remove('hidden');
            document.getElementById('ripple2').classList.remove('hidden');
            document.getElementById('recordHint').innerHTML = '<span class="text-red-500 font-medium">æ­£åœ¨å½•éŸ³...</span> å†æ¬¡ç‚¹å‡»åœæ­¢';
        }

        function stopRecording(manual = false) {
            state.isRecording = false;
            state.recognition.stop();
            clearSilenceTimer();

            document.getElementById('micBtn').classList.remove('bg-red-500', 'from-red-500', 'to-red-600');
            document.getElementById('micIcon').classList.replace('fa-stop', 'fa-microphone');
            document.getElementById('ripple1').classList.add('hidden');
            document.getElementById('ripple2').classList.add('hidden');
            document.getElementById('recordHint').textContent = 'ç‚¹å‡»éº¦å…‹é£å¼€å§‹è¯­éŸ³è¾“å…¥';

            // å¦‚æœæœ‰ç´¯ç§¯çš„æ–‡æœ¬ï¼Œæ‰§è¡Œç¿»è¯‘
            if (state.accumulatedText.trim()) {
                document.getElementById('inputText').value = state.accumulatedText;
                onInputChange();
                translateText();
            }
        }

        function clearSilenceTimer() {
            if (state.silenceTimer) {
                clearTimeout(state.silenceTimer);
                state.silenceTimer = null;
            }
        }

        function resetSilenceTimer() {
            clearSilenceTimer();
            if (state.autoStopDelay > 0 && state.isRecording) {
                state.silenceTimer = setTimeout(() => {
                    if (state.isRecording) {
                        toast(`é™éŸ³ ${state.autoStopDelay} ç§’ï¼Œè‡ªåŠ¨åœæ­¢å½•éŸ³`);
                        stopRecording(false);
                    }
                }, state.autoStopDelay * 1000);
            }
        }

        function onSpeechResult(e) {
            let interimText = '';

            for (let i = e.resultIndex; i < e.results.length; i++) {
                const transcript = e.results[i][0].transcript;
                if (e.results[i].isFinal) {
                    // ç´¯ç§¯æœ€ç»ˆç»“æœ
                    state.accumulatedText += transcript;
                } else {
                    interimText += transcript;
                }
            }

            // æ›´æ–°è¾“å…¥æ¡†æ˜¾ç¤ºï¼ˆç´¯ç§¯æ–‡æœ¬ + ä¸´æ—¶æ–‡æœ¬ï¼‰
            document.getElementById('inputText').value = state.accumulatedText + interimText;
            onInputChange();

            // é‡ç½®é™éŸ³è®¡æ—¶å™¨
            resetSilenceTimer();
        }

        function onSpeechError(e) {
            if (e.error === 'no-speech') {
                // é™éŸ³æ—¶ä¸åœæ­¢å½•éŸ³ï¼Œåªæ˜¾ç¤ºæç¤º
                if (state.isRecording) {
                    toast('æ­£åœ¨ç­‰å¾…è¯­éŸ³è¾“å…¥...', 'info');
                    return;
                }
            }
            stopRecording(false);
            const msgs = { 'not-allowed': 'è¯·å…è®¸éº¦å…‹é£æƒé™', 'network': 'ç½‘ç»œé”™è¯¯', 'aborted': 'å½•éŸ³å·²ä¸­æ­¢' };
            toast(msgs[e.error] || `è¯­éŸ³è¯†åˆ«é”™è¯¯: ${e.error}`, 'error');
        }

        // ========== Translation ==========
        async function translateText() {
            const text = document.getElementById('inputText').value.trim();
            if (!text) { toast('è¯·è¾“å…¥è¦ç¿»è¯‘çš„æ–‡æœ¬', 'error'); return; }
            if (!state.apiKey) { showSettings(); toast('è¯·å…ˆé…ç½® API Key', 'error'); return; }

            const translated = document.getElementById('translatedText');
            translated.textContent = 'ç¿»è¯‘ä¸­...';
            document.getElementById('originalSection').classList.add('hidden');

            const sourceLang = state.sourceLang === 'auto' ? '(è‡ªåŠ¨æ£€æµ‹è¯­è¨€)' : LANGUAGES[state.sourceLang].name;
            const targetLang = LANGUAGES[state.targetLang].name;

            const prompt = `You are a professional translator. Translate the following text from ${sourceLang} to ${targetLang}.
Only output the translation, nothing else. Do not include any explanations or notes.

Text to translate:
${text}`;

            try {
                const p = PROVIDERS[state.provider];
                const req = p.request(prompt, state.apiKey);
                const res = await fetch(req.url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json', ...req.headers },
                    body: JSON.stringify(req.body)
                });

                if (!res.ok) {
                    const err = await res.json().catch(() => ({}));
                    throw new Error(err.error?.message || `è¯·æ±‚å¤±è´¥ (${res.status})`);
                }

                const data = await res.json();
                const result = p.parse(data).trim();

                state.currentOriginal = text;
                state.currentTranslated = result;
                state.detectedLang = state.sourceLang === 'auto' ? detectLanguage(text) : state.sourceLang;

                // Show original section
                document.getElementById('originalSection').classList.remove('hidden');
                document.getElementById('originalText').textContent = text;
                document.getElementById('detectedLangBadge').textContent = `${LANGUAGES[state.detectedLang]?.flag || 'ğŸŒ'} ${LANGUAGES[state.detectedLang]?.name || 'åŸæ–‡'}`;

                // Show translated with typewriter effect
                typewriterEffect(translated, result);
                document.getElementById('targetLangBadge').textContent = `${LANGUAGES[state.targetLang].flag} ${LANGUAGES[state.targetLang].name}`;

                // Add to history
                addHistory(text, result, state.detectedLang, state.targetLang);

                // Auto speak
                if (state.autoSpeak) {
                    setTimeout(() => speakText('translated'), 500);
                }

            } catch (err) {
                translated.textContent = 'ç¿»è¯‘å¤±è´¥';
                toast(`ç¿»è¯‘å¤±è´¥: ${err.message}`, 'error');
            }
        }

        function typewriterEffect(el, text) {
            el.innerHTML = '';
            const chars = text.split('');
            chars.forEach((char, i) => {
                const span = document.createElement('span');
                span.textContent = char;
                span.style.animationDelay = `${i * 20}ms`;
                el.appendChild(span);
            });
        }

        function detectLanguage(text) {
            if (/[\u4e00-\u9fa5]/.test(text)) return 'zh';
            if (/[\u3040-\u309f\u30a0-\u30ff]/.test(text)) return 'ja';
            if (/[\uac00-\ud7af]/.test(text)) return 'ko';
            if (/[\u0400-\u04ff]/.test(text)) return 'ru';
            return 'en';
        }

        // ========== TTS ==========
        function getBestVoice(langCode) {
            if (!state.availableVoices.length) {
                state.availableVoices = speechSynthesis.getVoices();
            }

            const voices = state.availableVoices;
            const lang = langCode.split('-')[0]; // e.g. 'zh' from 'zh-CN'

            // Filter voices by language
            let candidates = voices.filter(v => v.lang.startsWith(lang));
            if (!candidates.length) {
                candidates = voices.filter(v => v.lang.includes(lang));
            }
            if (!candidates.length) {
                candidates = voices;
            }

            // Sort by preference based on voiceType
            const voiceType = state.voiceType;

            if (voiceType === 'natural') {
                // Prefer Google, Microsoft Neural, or voices with Natural/Neural in name
                candidates.sort((a, b) => {
                    const aNatural = /natural|neural|google|microsoft/i.test(a.name);
                    const bNatural = /natural|neural|google|microsoft/i.test(b.name);
                    if (aNatural && !bNatural) return -1;
                    if (!aNatural && bNatural) return 1;
                    return 0;
                });
            } else if (voiceType === 'female') {
                candidates.sort((a, b) => {
                    const aFemale = /female|woman|girl|zira|hazel|susan|samantha|xiaoxiao|xiaoyun/i.test(a.name);
                    const bFemale = /female|woman|girl|zira|hazel|susan|samantha|xiaoxiao|xiaoyun/i.test(b.name);
                    if (aFemale && !bFemale) return -1;
                    if (!aFemale && bFemale) return 1;
                    return 0;
                });
            } else if (voiceType === 'male') {
                candidates.sort((a, b) => {
                    const aMale = /male|man|david|mark|yunyang|yunxi/i.test(a.name);
                    const bMale = /male|man|david|mark|yunyang|yunxi/i.test(b.name);
                    if (aMale && !bMale) return -1;
                    if (!aMale && bMale) return 1;
                    return 0;
                });
            }

            return candidates[0] || null;
        }

        function speakText(type) {
            const text = type === 'original' ? state.currentOriginal : state.currentTranslated;
            const lang = type === 'original' ? state.detectedLang : state.targetLang;
            if (!text) return;

            speechSynthesis.cancel();
            const u = new SpeechSynthesisUtterance(text);
            u.lang = LANGUAGES[lang]?.code || 'en-US';
            u.rate = state.speechRate;
            u.pitch = 1.0;

            // Select best voice
            const voice = getBestVoice(u.lang);
            if (voice) {
                u.voice = voice;
            }

            speechSynthesis.speak(u);
        }

        // ========== Copy ==========
        function copyText(type) {
            const text = type === 'original' ? state.currentOriginal : state.currentTranslated;
            if (!text) return;
            navigator.clipboard.writeText(text).then(() => toast('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿'));
        }

        // ========== History ==========
        function addHistory(orig, trans, from, to) {
            state.history.unshift({
                id: Date.now(),
                orig, trans, from, to,
                time: new Date().toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' })
            });
            if (state.history.length > 20) state.history.pop();
            localStorage.setItem('history', JSON.stringify(state.history));
            renderHistory();
        }

        function renderHistory() {
            const el = document.getElementById('historyList');
            if (!state.history.length) {
                el.innerHTML = '<p class="text-center text-sm text-slate-400 py-8">æš‚æ— å†å²è®°å½•</p>';
                return;
            }
            el.innerHTML = state.history.map(h => `
        <div onclick="loadHistory(${h.id})" class="p-3 rounded-xl bg-white/50 dark:bg-dark-200/50 border border-slate-200/50 dark:border-slate-700/50 cursor-pointer hover:border-primary-500/50 transition-colors">
            <p class="text-sm text-slate-500 dark:text-slate-400 truncate">${h.orig}</p>
            <p class="text-base text-slate-700 dark:text-slate-200 font-medium truncate mt-1">${h.trans}</p>
            <div class="flex items-center gap-2 mt-2 text-xs text-slate-400">
                <span>${LANGUAGES[h.from]?.flag || 'ğŸŒ'} â†’ ${LANGUAGES[h.to]?.flag || 'ğŸŒ'}</span>
                <span class="ml-auto">${h.time}</span>
            </div>
        </div>
    `).join('');
        }

        function loadHistory(id) {
            const h = state.history.find(x => x.id === id);
            if (!h) return;
            document.getElementById('inputText').value = h.orig;
            onInputChange();
            state.currentOriginal = h.orig;
            state.currentTranslated = h.trans;
            state.detectedLang = h.from;

            document.getElementById('originalSection').classList.remove('hidden');
            document.getElementById('originalText').textContent = h.orig;
            document.getElementById('detectedLangBadge').textContent = `${LANGUAGES[h.from]?.flag || 'ğŸŒ'} ${LANGUAGES[h.from]?.name || 'åŸæ–‡'}`;
            document.getElementById('translatedText').textContent = h.trans;
            document.getElementById('targetLangBadge').textContent = `${LANGUAGES[h.to].flag} ${LANGUAGES[h.to].name}`;

            document.getElementById('targetLang').value = h.to;
            onLanguageChange();
        }

        function clearHistory() {
            state.history = [];
            localStorage.setItem('history', '[]');
            renderHistory();
            toast('å†å²å·²æ¸…ç©º');
        }

        // ========== Settings ==========
        function showSettings() {
            document.getElementById('settingsModal').classList.remove('hidden');
            document.getElementById('providerSelect').value = state.provider;
            document.getElementById('apiKeyInput').value = state.apiKey;
            onProviderChange();
        }

        function hideSettings() {
            document.getElementById('settingsModal').classList.add('hidden');
        }

        function onProviderChange() {
            const p = document.getElementById('providerSelect').value;
            document.getElementById('providerInfo').textContent = PROVIDERS[p].info;
        }

        function toggleApiKeyVisibility() {
            const input = document.getElementById('apiKeyInput');
            const icon = document.getElementById('eyeIcon');
            if (input.type === 'password') {
                input.type = 'text';
                icon.classList.replace('fa-eye', 'fa-eye-slash');
            } else {
                input.type = 'password';
                icon.classList.replace('fa-eye-slash', 'fa-eye');
            }
        }

        function saveSettings() {
            state.autoSpeak = document.getElementById('autoSpeak').checked;
            localStorage.setItem('autoSpeak', state.autoSpeak);
        }

        function saveAndClose() {
            state.provider = document.getElementById('providerSelect').value;
            state.apiKey = document.getElementById('apiKeyInput').value.trim();
            state.voiceType = document.getElementById('voiceSelect').value;
            state.speechRate = parseFloat(document.getElementById('speechRate').value);

            localStorage.setItem('provider', state.provider);
            localStorage.setItem('apiKey', state.apiKey);
            localStorage.setItem('voiceType', state.voiceType);
            localStorage.setItem('speechRate', state.speechRate);

            if (state.apiKey) {
                document.getElementById('apiWarning').classList.add('hidden');
            }

            hideSettings();
            toast('è®¾ç½®å·²ä¿å­˜');
        }

        // ========== Toast ==========
        function toast(msg, type = 'success') {
            const el = document.getElementById('toast');
            const icon = document.getElementById('toastIcon');
            document.getElementById('toastMsg').textContent = msg;

            const iconClasses = {
                success: 'fas fa-check-circle text-green-400',
                error: 'fas fa-exclamation-circle text-red-400',
                info: 'fas fa-info-circle text-blue-400'
            };
            icon.className = iconClasses[type] || iconClasses.success;

            el.classList.remove('translate-y-20', 'opacity-0');
            el.classList.add('translate-y-0', 'opacity-100');

            setTimeout(() => {
                el.classList.add('translate-y-20', 'opacity-0');
                el.classList.remove('translate-y-0', 'opacity-100');
            }, 3000);
        }
    </script>
</body>

</html>
